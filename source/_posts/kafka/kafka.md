[TOC]





#### 消息队列

##### 模式一： 点对点

一对一，消费者主动拉取数据，数据收到后消息清除。 Kafka 是这一种模式

好处：适用于客户端A(发送数据方)和客户端B(消费数据方)的速度不匹配。

缺点：需要消息接收方开一个进程实时监控消息发送方是否有消息

##### 模式二：发布/订阅模式

一对多,数据生产后发送给所有的订阅者

好处：不用进程监听

坏处：不同的订阅者之间速度可能不匹配

![1568863739174](img/1568863739174.png)





#### producer的写入流程

![1568866111822](img/1568866111822.png)

确保producer这边的数据都能够写入kafka的机制是 ACK，由kafka这边反馈一个信号(0,1,all)