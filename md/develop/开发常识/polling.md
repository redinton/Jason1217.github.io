[TOC]



#### polling & long polling

轮询(polling / ajax polling) :  

* 不管服务器端有没有更新，**客户端(通常是指浏览器)都定时的发送请求进行查询**
  * 轮询的结果可能是服务器端有新的更新过来，也可能什么也没有，只是返回个空的信息。不管结果如何，客户端处理完后到下一个定时时间点将继续下一轮的轮询

长轮询(long polling):

* **客户端是不做轮询的**，客户端在发起一次请求后**立即挂起**，一直到服务器端有更新的时候，服务器才会主动推送信息到客户端。

*  在服务器端有更新并推送信息过来之前这个周期内，客户端不会有新的多余的请求发生，服务器端对此客户端也啥都不用干，只保留最基本的连接信息.
  * 客户端响应处理函数会在处理完服务器返回的信息后，再次发出请求，重新建立连接；
  * 当客户端处理接收的数据、重新建立连接时，服务器端可能有新的数据到达；这些信息会被服务器端保存直到客户端重新建立连接，客户端会一次把当前服务器端所有的信息取回。

#### **websocket**

轮询和长轮询都是使用**普通的HTTP协议**传输数据, 只允许client单方面发起请求，然后server进行响应，而不能主动给client发送数据.

* WebSocket协议是HTML5定义的一种新协议，它实现了浏览器与服务器全双工通信(full-duplex)。

* webosocket使用HTTP请求握手，握手之后，就不再使用HTTP请求，可以在client与server之间进行数据交换时避免反复传输http headers。



#### Server-Sent Events (SSEs)

由于http协议无法做到服务器主动推送信息，变通方法，服务器向客户端声明，接下来要发送的是流信息(streaming). 也就是说，发送的不是一次性的数据包，而是一个数据流，会连续不断得发送过来。此时客户端不会关闭连接，会一直等服务器发来新的数据流。 

SSE就是这种机制，基于http协议，样例类似于视频播放。

* WebSocket 全双工
* SSE单向通道
* SSE 基于http，现有的server软件都支持，websocket 是一个独立协议
* SSE 默认支持断线重连，websocket需要自己实现

#### 参考

[polling 和 long polling 工作原理](https://www.cnblogs.com/chenny7/p/3954396.html)